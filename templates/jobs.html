{% extends 'user-base.html' %}

{% load static %}

{% block title %}
  Jobs
{% endblock %}

{% block javascript %}
<script src="{% static 'js/jobs.js' %}"></script>
<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();   
});
$(document).ready(function() {
	$('#jobs-table').DataTable({
order: [[0, 'asc']],
"columnDefs": [
    { "orderable": false, "targets": [4, 5, 6, 7] },
  ],
"language": {
      "emptyTable": "No jobs"
    },
"bPaginate": true,
    "bLengthChange": false,
    "bFilter": false,
    "bInfo": true,
    "bAutoWidth": false
	});
} );
</script>
{% endblock %}

{% block contentuser %}
  <h2 style="display: inline">Jobs</h2>
  &nbsp; &nbsp; &nbsp; &nbsp;
  <h6 style="display: inline"> <a href="{% url 'job_create' %}">
		  <span class="fa fa-plus"></span>
     CREATE JOB
	  </a></h6>

	  <div class="d-flex">
	  <div class="ml-auto p-2">
<div class="btn-group btn-group-toggle" data-toggle="buttons">
  <label class="btn btn-outline-dark">
	  <input type="radio" name="options" id="option1" autocomplete="off" onclick="javascript:window.location.href='/jobs'; return false;" {{ state_selectors.active }}> Active
  </label>
  <label class="btn btn-outline-dark">
	  <input type="radio" name="options" id="option2" autocomplete="off" onclick="javascript:window.location.href='/jobs?completed=true&limit=10'; return false;" {{ state_selectors.completed }}> Completed
  </label>
  <label class="btn btn-outline-dark">
	  <input type="radio" name="options" id="option3" autocomplete="off" onclick="javascript:window.location.href='/jobs?completed=true&active=true&limit=10'; return false;" {{ state_selectors.all }}> All
  </label>
</div>
	  </div>

	  <div class="p-2">
		  <form class="form-inline" method="GET" action="/jobs">
			  <input class="form-control" type="search" name="fq" placeholder="&#xF002; Filter jobs" style="font-family:Arial, FontAwesome" aria-label="Search" value="{{ search }}">
    </form>
	  </div>
	  <div class="p-2">
		  <a class="btn" onClick="window.location.reload()"><span class="fa fa-refresh"></span></span></a>
	  </div>

  </div>

  <table class="table table-striped" id="jobs-table">
    <thead>
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Status</th>
        <th>Created</th>
        <th>Elapsed</th>
        <th>Image</th>
        <th>Command</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% include 'jobs-list.html' %}
    </tbody>
  </table>
<br/>
  
  <div class="modal fade" id="modal-jobs">
    <div class="modal-dialog">
      <div class="modal-content">
      </div>
    </div>
  </div>

{% endblock %}
